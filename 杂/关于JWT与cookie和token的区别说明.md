# 关于JWT与cookie和token的区别说明

### 一、Cookie

####原理：

1.用户输入用户名与密码，发送给服务器。

2.服务器验证用户名和密码，正确的就创建一个会话（session），同时会把这个会话的ID保存到客户端浏览器中，因为保存的地方是浏览器的cookie，所以这种认证方式叫做基于cookie的认证方式。

3.后续的请求中，浏览器会发送会话ID到服务器，服务器上如果能找到对应的ID的会话，那么服务器就会返回需要的数据给浏览器。

4.当用户退出登录，会话会同时在客户端和服务器端被销毁。

####不足之处：

1.服务器要为每个用户保留session信息，连接用户过多会造成服务器内存压力过大。

2.适合单一域名，不适合第三方请求。



## 二. Token

####原理：

1.用户输入用户名和密码，发送给服务器。

2.服务器验证用户名和密码，正确的话就返回一个签名过的token（token 可以认为就是个长长的字符串），浏览器客户端拿到这个token。

3.后续每次请求中，浏览器会把token作为http header发送给服务器，服务器验证签名是否有效，如果有效那么认证就成功，可以返回客户端需要的数据。

4.一旦用户退出登录，只需要客户端销毁token即可，服务器端不需要任何操作

这种方式的特点就是客户端的token中自己保留有大量信息，服务器没有存储这些信息，而只负责验证，不必进行数据库查询，执行效率大大提高。

5.JWT的组成参考https://www.jb51.net/article/224546.htm



###总结

因为基于cookie的方式需要服务端保存大量session信息，因此用户量较大时，会有性能压力。并且如果服务器是集群模式，则需要有公共的session库保存所有session信息，不适用于单点登录。而token是不需要存于服务器里的。token字符串中有三段base64后的信息，第一段保存加密方式；第二段保存用户信息，如userId；第三段保存签名。服务端接收到token后，用和之前生成token同样的方式再次生成字符串，和收到的token对比；如果一致，则签名认证成功，再用token中的用户信息去定向用户。
1.轮询：定时询问，如客户端定时向服务端查询状态

2.心跳：服务端保存下来所有客户端的状态信息，然后等待客户端定时来访问服务端，更新自己的当前状态，如果客户端超过指定的时间没有来更新状态，则认为客户端已经宕机或者其状态异常。客户端会定时向服务端发送简单数据，保持心跳。

因为将TCP设为长连接（connection: keep-alive），即使不设置超时时间，也会因为5分钟内没有通讯而被运营商中断。所以心跳的时间一般设置为3-5分钟。因此心跳机制，主要用于面向运营商的保活。

3.ping-pong机制：在心跳的3-5分钟时间间隔内，还无法保障通信双方是否通信正常，因此引入了Ping-pong机制，它是针对服务端和客户端双向使用的。例如ping为客户端发出请求确认连接状态，pong为服务端的回应；同时服务端也会发出ping,客户端回复pong。`SocketRocket`中有封装好的ping方法和pong回调

4.QOS机制：指一个网络能够利用各种基础技术，为指定的[网络通信](https://link.jianshu.com/?t=http://baike.baidu.com/view/538641.htm)提供更好的服务能力, 是网络的一种安全机制， 是用来解决网络延迟和阻塞等问题的一种技术。MQTT实现了此种机制，保证了通信顺畅。如在MQTTKit中：

```objective-c
typedef enum MQTTQualityOfService : NSUInteger {
    AtMostOnce,
    AtLeastOnce,
    ExactlyOnce
} MQTTQualityOfService;
```

分别对应最多发送一次，至少发送一次，精确只发送一次。

- QOS(0),最多发送一次：如果消息没有发送过去，那么就直接丢失。
- QOS(1),至少发送一次：保证消息一定发送过去，但是发几次不确定。
- QOS(2),精确只发送一次：它内部会有一个很复杂的发送机制，确保消息送到，而且只发送一次。